# 프로젝트 외부 서비스 활용 매뉴얼

| 서비스 | 용도 | 필요 정보 |
| :--- | :--- | :--- |
| **Google OAuth2** | 구글 소셜 로그인 | - Client ID : 420816896172-eq73a62s09upc392j6gog3pp0vbse3af.apps.googleusercontent.com - Client Secret : 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 - scope : profile, email - Redirect URI : [https://i13e206.p.ssafy.io:8445/login/oauth2/code/google](https://i13e206.p.ssafy.io:8445/login/oauth2/code/google) |
| **AWS S3** | 파일 업로드/저장 | - Access Key : AKIA2UMF2NYK4CN3TAE4 - Secret Key : 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 - Region : ap-northeast-2 - Bucket : interview-ai-e206 |
| **Naver SMTP** | 메일 발송 | - SMTP 호스트 : smtp.naver.com - 포트 : 465 - 계정 : heesan6615@naver.com- 앱 비밀번호 : 62H81FELXBYB |
| **OpenVidu** | 화상면접/녹화 | - OpenVidu 서버 URL : [https://i13e206.p.ssafy.io:8442/](https://i13e206.p.ssafy.io:8442/) - Secret : i13e206 - Recording 경로 : /home/ubuntu/openvidu_recordings |
| **OpenAI API** | 면접 질문 생성, 사용자 답변 분석, 모범 답변 생성 | - API Key : S13P12E206-44b18244-970e-4239-8254-4f31ee1ddd0e - Base URL : [https://gms.ssafy.io/gmsapi/api.openai.com/v1](https://gms.ssafy.io/gmsapi/api.openai.com/v1) - 모델명 : gpt-4o (채팅), text-embedding-3-small (임베딩) |
| **FastAPI 서비스** | 답변 분석 모델 연동 | - 로컬 URL : http://localhost:8000- 서버 URL : http://review-AI-test:8000 |


## **1. Google OAuth2**

- **용도**
    - Google 계정을 이용한 사용자 소셜 로그인 기능 제공.
- **구성 정보**
    - **Client ID**: `420816896172-eq73a62s09upc392j6gog3pp0vbse3af.apps.googleusercontent.com`
    - **Client Secret**: `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`
    - **Redirect URI**: `https://i13e206.p.ssafy.io:8445/login/oauth2/code/google`
- **연동 및 사용법**
    - Spring Boot 백엔드의 `application.yml` 파일에 아래와 같이 OAuth2 클라이언트 정보를 설정합니다.
        
        ```yaml
        spring:
          security:
            oauth2:
              client:
                registration:
                  google:
                    client-id: "420816896172-eq73a62s09upc392j6gog3pp0vbse3af.apps.googleusercontent.com"
                    client-secret: "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"
                    scope:
                      - profile
                      - email
                    redirect-uri: "https://i13e206.p.ssafy.io:8445/login/oauth2/code/google"
        ```
        

### **2. AWS S3**

- **용도**
    - 사용자가 올린 파일(이력서, 포트폴리오, 답변 스크립트)을 저장하고 관리하는 오브젝트 스토리지.
- **구성 정보**
    - **Access Key**: `AKIA2UMF2NYK4CN3TAE4`
    - **Secret Key**: `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`
    - **Region**: `ap-northeast-2`
    - **Bucket**: `interview-ai-e206`
- **연동 및 사용법**
    - AWS SDK가 이 인증 정보를 사용하여 S3에 접근합니다. Spring Cloud AWS를 사용하는 경우, `application.yml`에 아래와 같이 설정합니다.
        
        ```yaml
        cloud:
          aws:
            credentials:
              access-key: AKIA2UMF2NYK4CN3TAE4
              secret-key: 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
            s3:
              bucket: interview-ai-e206
            region:
              static: ap-northeast-2
            stack:
              auto: false
        ```
        
    

### **3. Naver SMTP**

- **용도**
    - 회원가입 이메일 인증, 비밀번호 찾기 시 이메일 인증을 위해 사용자에게 이메일을 발송.
- **구성 정보**
    - **SMTP 호스트**: `smtp.naver.com`
    - **포트**: `465` (SSL)
    - **계정**: `heesan6615@naver.com`
    - **앱 비밀번호**: `62H81FELXBYB`
- **연동 및 사용법**
    - Spring Boot의 Mail Sender 기능에 아래와 같이 SMTP 서버 정보를 설정합니다.
        
        ```yaml
        spring:
          mail:
            host: smtp.naver.com
            port: 465
            username: heesan6615@naver.com
            password: 62H81FELXBYB
            properties:
              mail:
                smtp:
                  auth: true
                  ssl:
                    enable: true
                    trust: smtp.naver.com
                  starttls:
                    enable: true
                    required: true
        ```
        

### **4. OpenVidu**

- **용도**
    - WebRTC 기반의 실시간 화상 면접 기능 구현 및 면접 과정 녹화.
- **구성 정보**
    - **서버 URL**: `https://i13e206.p.ssafy.io:8442/`
    - **Secret**: `i13e206`
    - **Recording 경로**: `/home/ubuntu/openvidu_recordings`
- **연동 및 사용법**
    - 백엔드 서버에서 OpenVidu Java SDK를 초기화할 때 `서버 URL`과 `Secret`을 사용합니다. 이를 통해 화상 세션을 생성하고, 참여자 토큰을 발급받아 프론트엔드로 전달합니다.
        
        ```yaml
        openvidu:
          url: https://i13e206.p.ssafy.io:8442/
          secret: i13e206
          recording:
            base-dir: /home/ubuntu/openvidu_recordings
        ```
        
    

### **5. OpenAI API**

- **용도**
    - AI 기반 면접 질문 실시간 생성, 사용자 답변 분석, 평가를 위한 모범 답변 생성.
- **구성 정보**
    - **API Key**: `S13P12E206-44b18244-970e-4239-8254-4f31ee1ddd0e`
    - **Base URL**: `https://gms.ssafy.io/gmsapi/api.openai.com/v1`
    - **주요 모델**:
        - **채팅/생성**: `gpt-4o-mini`
- **연동 및 사용법**
    
    ```yaml
    ai:
      openai:
        api-key: "S13P12E206-44b18244-970e-4239-8254-4f31ee1ddd0e"
        base-url: "https://gms.ssafy.io/gmsapi/api.openai.com/v1"
        chat:
          options:
            model: "gpt-4o-mini"
    ```
    

### **6. FastAPI 서비스**

- **용도**
    - 면접 답변 영상 경로를 전달하여 사용자의 표정 및 답변을 분석하고 결과를 반환하는 내부 서비스.
- **구성 정보**
    - **로컬 개발 환경 URL**: `http://localhost:8000`
    - **서버(Docker) 환경 URL**: `http://review-AI-test:8000`
- **연동 및 사용법**
    - Spring Boot의 OpenVidu Webhook 설정을 통해 녹화 중지 요청이 들어오면, Recording ID를 바탕으로 KafKa에 분석 요청을 발행합니다.
    - Fast API 서버는 Kafka로부터 발행된 분석 요청을 대기하다가 요청이 들어오면 recordingId를 바탕으로 영상을 분석하여 STT(Speech To Text), 각 프레임 별 표정 분석 내용, 답변 내용의 의도를 각 문단 별로 분석한 뒤, Kafka에 “분석 완료” 를 발행합니다.
    - Spring Boot는 분석된 내용을 기다리다 분석완료 신호가 오면, 분석 내용을 DB에 저장합니다.
    - 이후 Spring Boot는 STOMP 웹소켓을 통해 프론트엔드에게 특정 녹화 영상이 분석 완료되었다는 점을 전달합니다.
        
        ```yaml
        # 서버 기준
        fastapi:
          url: http://review-AI-test:8000
        ```